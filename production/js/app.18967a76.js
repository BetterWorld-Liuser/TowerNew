(function(e){function t(t){for(var r,s,c=t[0],o=t[1],u=t[2],d=0,f=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0a04":function(e,t,n){},"0a6f":function(e,t,n){},"0ea3":function(e,t,n){"use strict";n("a1aa")},"1cdd":function(e,t,n){},2395:function(e,t,n){},"307a":function(e,t,n){"use strict";n("0a04")},"380d":function(e,t,n){"use strict";n("670e")},"39fa":function(e,t,n){"use strict";n("4d9b")},"4a50":function(e,t,n){"use strict";n("0a6f")},"4d9b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flexColumn",attrs:{id:"app"}},[n("navBar"),n("transition",{attrs:{name:"slide-fade"}},[n("router-view")],1),n("recordInfo")],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"firefox bold firefoxShadow font16",attrs:{id:"navBar"}},[n("div",{staticClass:"tCard",attrs:{id:"homeCard"}},[n("div",{staticClass:" button selector",on:{click:function(t){return e.urlto("/")}}},[e._v(" 首页 ")]),n("div",{staticClass:"button selector",on:{click:function(t){return e.urlto("/square")}}},[e._v(" 搜索 ")]),n("div",{staticClass:"button selector",on:{click:function(t){return e.urlpush()}}},[e._v(" 介绍 ")]),n("a",{staticClass:"button selector",attrs:{href:"https://www.wjx.cn/jq/84849634.aspx",target:"_blank"}},[e._v("反馈")])]),n("div",{staticClass:"tCard",attrs:{id:"userCard"}},[n("Avataaars",{staticStyle:{position:"relative",bottom:"3px",width:"40px"}}),e.user.userData.loginState?n("div",{staticClass:"button selector",on:{click:function(t){return e.alert("敬请期待")}}},[e._v(" 个人中心 ")]):n("div",{staticClass:"button selector",on:{click:function(t){return e.urlto("/login")}}},[e._v(" 登录 ")])],1)])},c=[],o=n("c5fd"),u=n.n(o),l=n("d4ec"),d=n("bee2"),f=n("ade3"),p=function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"userData",{loginState:!1,email:"",token:"",level:1})}return Object(d["a"])(e,[{key:"getUserLocalData",value:function(){null!=localStorage.getItem("userData")?this.userData=JSON.parse(localStorage.getItem("userData")):this.initUserData()}},{key:"initUserData",value:function(){this.userData={loginState:!1,email:"",token:"",level:1}}},{key:"localizeData",value:function(){localStorage.setItem("userData",JSON.stringify(this.userData))}}]),e}(),h={name:"NavBar",components:{Avataaars:u.a},created:function(){this.user.getUserLocalData()},data:function(){return{user:new p}},methods:{urlpush:function(){this.$router.push({name:"brick",params:{_id:"5e9b4d8828490c2f9ebf9064",moduleId:"5e9b558e28490c2f9ebf9065"}})},urlto:function(e){this.$router.push(e)}},computed:{}},m=h,v=(n("7b7c"),n("2877")),b=Object(v["a"])(m,s,c,!1,null,"5c46a0eb",null),g=b.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recordInfo"},[n("div",[e._v("Liuser出品")]),n("div",[e._v("© 2021")]),n("div",[e._v("TongTianTa")]),n("a",{attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?spm=a2c4g.11186623.7y9jhqsfz.113.34257243mu7XSO"}},[e._v("陕ICP备19012321号")])])}],_={name:"RecordInfo"},x=_,C=(n("4a50"),Object(v["a"])(x,k,w,!1,null,"449663ad",null)),y=C.exports,D={name:"App",components:{navBar:g,recordInfo:y}},R=D,O=(n("7c55"),Object(v["a"])(R,a,i,!1,null,null,null)),j=O.exports,S=n("5c96"),N=n.n(S),I=(n("0fae"),n("bc3a")),T=n.n(I),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editorPage flexRJC"},[n("div",{staticClass:"func"},[n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"提交",placement:"right"}},[n("div",{staticClass:"submit el-icon-caret-right font20",on:{click:e.changeArticle}})]),n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"取消",placement:"right"}},[n("div",{staticClass:"submit el-icon-refresh-left font20",on:{click:e.back}})])],1),n("div",{attrs:{id:"vditor"}})])},B=[],M=n("1da1"),$=(n("96cf"),n("ff41")),L=n.n($),A=(n("2f2f"),n("a1bc")),U=n.n(A),P=new T.a.create({baseURL:U.a.developmentMode?U.a.developmentURL:U.a.productionURL,timeout:7e3,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}),H=P,q=function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"articleData",{_id:"",title:"",content:"",updateTime:(new Date).toLocaleString(),like:0,version:"1.0.0",versionSay:"lalallal",agreement:"TIM",lock:!1,creator:""})}return Object(d["a"])(e,[{key:"getArticleData",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.get("/brickpage/getArticle",{params:{_id:t}});case 2:n=e.sent,r=n.data,this.articleData=r.res;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),z={data:function(){var e=this;return{editorConfig:{width:"80%",toolbar:["headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","table","|","undo","redo","|","fullscreen",{name:"more",toolbar:["both","export","outline","preview","info","help"]}],toolbarConfig:{pin:!0},preview:{hljs:{lineNumber:!0,style:"abap"},markdown:{chinesePunct:!0,footnotes:!0,paragraphBeginningSpace:!1},math:{inlineDigit:!0,engine:"KaTeX"}},mode:"ir",height:"auto",counter:{enable:!0},after:function(){e.editor.setValue(e.article.articleData.content)},blur:function(){e.content=e.editor.getValue()}},editor:"",article:new q,content:""}},mounted:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getArticle();case 2:e.$nextTick((function(){e.editor=new L.a("vditor",e.editorConfig)}));case 3:case"end":return t.stop()}}),t)})))()},created:function(){return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{getArticle:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.article.getArticleData(e.articleId);case 2:case"end":return t.stop()}}),t)})))()},changeArticle:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=confirm("确定提交吗？恶意修改将被封号"),n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,H.post("/editor/changeArticle",{_id:e.article.articleData._id,content:e.content});case 5:e.back();case 6:case"end":return t.stop()}}),t)})))()},back:function(){this.$router.go(-1)}},computed:{articleId:function(){return this.$route.params._id}}},J=z,V=(n("39fa"),Object(v["a"])(J,E,B,!1,null,"9de4ab6a",null)),W=V.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._m(0),n("div",{staticClass:"infoBar flexRow font18"},[n("div",[e._v("今日访问新增"+e._s(e.info.visitToday))]),n("div",[e._v("今日砖石新增"+e._s(e.info.brickNew))]),n("div",[e._v("今日用户新增"+e._s(e.info.userNew))]),n("div",[e._v("今日模块新增"+e._s(e.info.articleNew))]),n("div",[e._v("总访问数"+e._s(e.info.visit))]),n("div",[e._v("砖石总数"+e._s(e.info.brickNumber))]),n("div",[e._v("用户总数"+e._s(e.info.userNumber))]),n("div",[e._v("文章总数"+e._s(e.info.articleNumber))])])])},X=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticClass:"title font60 bold"},[e._v(" 通天塔 ")]),n("div",{staticClass:"font16"},[e._v(" v0.4.1 ")]),n("div",{staticClass:"subtitle font20"},[e._v(" 通天塔是一个可供所有人编辑和学习的学习指南 ")]),n("div",{staticClass:"introduce font18"},[e._v(" 我们在试图汇聚世界上最好的资源，让所有人都有机会站在巨人的肩膀上，创造和实现更多的东西 ")]),n("div",{staticClass:"introduceEnglish font18"},[e._v(" We are trying to bring together the best resources in the world so that everyone has the opportunity to stand on the shoulders of giants, so to create and achieve more. ")]),n("div",{staticClass:"author"},[e._v(" Create By liu ")])])}],F={data:function(){return{info:{}}},methods:{},created:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,H.get("/mainpage/getInfo");case 2:n=t.sent,r=n.data,e.info=r.res;case 5:case"end":return t.stop()}}),t)})))()}},K=F,G=(n("6aae"),Object(v["a"])(K,Z,X,!1,null,"66861bdc",null)),Q=G.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container flexRow"},[n("div",{staticClass:"menuArea"},[n("div",{staticClass:"menu"},[n("div",{staticClass:"titleContainer flexRow"},[n("div",{staticClass:"title"},[n("div",[e._v(" "+e._s(e.menu.title)+" ")])]),0==e.brick.brickData.lock||e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"重命名标题",placement:"top"}},[n("div",{staticClass:"renameTitle func",on:{click:function(t){return e.changeBrickTitle()}}},[n("i",{staticClass:"el-icon-edit-outline icon"})])]):e._e()],1),n("draggable",{staticClass:"dragArea",attrs:{tag:"div",group:{name:"g1"},animation:"100",disabled:!e.drag.state},on:{end:e.switchIndex},model:{value:e.menu.menuContent,callback:function(t){e.$set(e.menu,"menuContent",t)},expression:"menu.menuContent"}},e._l(e.menu.menuContent,(function(t){return n("div",{key:t._id},[n("div",{class:["item",e.menu.NodeSelected==t._id?"selected":""],on:{click:function(n){return e.pushTo(t)}}},[n("div",{class:["listTitle",0==t.level?"bold":""],style:"position:relative;left:"+14*t.level+"px",attrs:{id:t.id}},[n("i",{staticClass:"no-vue-drag-node-icon"}),n("div",{staticClass:"Text"},[e._v(" "+e._s(t.name)+" ")])])])])})),0)],1),n("div",{staticClass:"menuTool flexRow  "},[0==e.brick.brickData.lock||e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:e.drag.dragTips,placement:"top"}},[n("div",{class:e.drag.state?"dragOpen func":"func",on:{click:function(t){return e.drag.switchState()}}},[n("i",{staticClass:"el-icon-mouse icon"})])]):e._e(),0==e.brick.brickData.lock||e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"重命名当前模块",placement:"top"}},[n("div",{staticClass:"renameModule func",on:{click:function(t){return e.changeModuleName()}}},[n("i",{staticClass:"el-icon-edit icon"})])]):e._e(),0==e.brick.brickData.lock||e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"修改模块层级",placement:"top"}},[n("div",{staticClass:"func",on:{click:function(t){return e.changeModuleLevel()}}},[n("i",{staticClass:"el-icon-s-help icon"})])]):e._e(),0==e.brick.brickData.lock||e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"添加新模块",placement:"top"}},[n("div",{staticClass:"func",on:{click:function(t){return e.createModule()}}},[n("i",{staticClass:"el-icon-plus icon"})])]):e._e(),e.user.userData.level>5?n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"删除模块",placement:"top"}},[n("div",{staticClass:"func",on:{click:function(t){return e.deleteModule()}}},[n("i",{staticClass:"el-icon-delete icon"})])]):e._e()],1),n("div",{class:e.brick.brickData.lock&&e.user.userData.level<5?"editBrick bold lock":"editBrick bold ",on:{click:function(t){return e.gotoEditor()}}},[e._v(" 编辑此砖石 ")])]),e._m(0)])},ee=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contentArea"},[n("div",{staticClass:"content"},[n("div",{staticClass:"showContent"},[n("div",{staticClass:"contentRender",staticStyle:{"min-height":"500px"}})])])])}],te=n("b76a"),ne=n.n(te),re=n("6e08"),ae=n.n(re),ie=function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"state",!1),Object(f["a"])(this,"dragTips","点击打开拖拽状态")}return Object(d["a"])(e,[{key:"switchState",value:function(){1==this.state?(this.state=!1,this.dragTips="点击打开拖拽状态"):(this.state=!0,this.dragTips="点击关闭拖拽状态")}}]),e}(),se=(n("4de4"),function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"brickData",{_id:"",title:"加载中",watchingUser:[],introduce:"暂无介绍",like:0,author:"陌生人",modules:[],lock:!1,description:"暂无介绍",seeTimes:0,editHistory:[]})}return Object(d["a"])(e,[{key:"getBrick",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.get("/brickpage/getBrick",{params:{_id:t}});case 2:n=e.sent,r=n.data,this.brickData=r.res;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeBrickTitle",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/changeBrickTitle",{_id:this.brickData._id,title:t});case 2:n=e.sent,r=n.data,alert(r.message),this.brickData.title=t;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"switchIndex",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/changeModuleList",{_id:this.brickData._id,swap1:t.oldIndex,swap2:t.newIndex});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"watchAdd",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/addWatch",{_id:this.brickData._id,email:t});case 2:this.brickData.watchingUser.push(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"watchRemove",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/removeWatch",{_id:this.brickData._id,email:t});case 2:this.brickData.watchingUser=this.brickData.watchingUser.filter((function(e){return e!=t}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"likeBrick",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/likeBrick",{_id:this.brickData._id});case 2:this.brickData.like++;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createModule",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/createModule",{_id:this.brickData._id,level:t,i:n,email:r});case 2:a=e.sent,i=a.data,alert(i.message),this.getBrick(this.brickData._id);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"changeModuleName",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/changeModuleName",{_id:this.brickData._id,id:t,newName:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"changeModuleLevel",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/changeModuleLevel",{_id:this.brickData._id,id:t,level:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleBrick",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/deleBrick",{_id:this.brickData._id});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleModule",value:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("/brickpage/deleModule",{_id:this.brickData._id,id:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),ce=(n("b0c0"),n("a434"),function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"NodeSelected",""),Object(f["a"])(this,"NodeSort",0),Object(f["a"])(this,"titleEditable",!1),Object(f["a"])(this,"title","加载中"),Object(f["a"])(this,"menuContent",[])}return Object(d["a"])(e,[{key:"initData",value:function(){this.NodeSelected=this.menuContent[0]._id}},{key:"getMenu",value:function(e){this.menuContent=e}},{key:"getTitle",value:function(e){this.title=e}},{key:"switchTitleEditable",value:function(){this.titleEditable=!this.titleEditable}},{key:"changeNodeSelected",value:function(e){this.NodeSelected=e,this.NodeSort=this.findNode(e)}},{key:"findNode",value:function(e){for(var t=0;t<this.menuContent.length;t++)if(this.menuContent[t]._id==e)return t;return-1}},{key:"addChild",value:function(){var e=confirm("确认要添加新模块吗？（恶意添加将导致封号）");return e}},{key:"renameName",value:function(e){var t=this.findNode(this.NodeSelected);this.menuContent[t].name=e}},{key:"deleteModule",value:function(){this.menuContent.splice(this.NodeSort,1)}},{key:"relevel",value:function(e){this.menuContent[this.NodeSort].level=e}},{key:"switchIndex",value:function(e){var t=this.menuContent[e.oldIndex];this.menuContent.splice(e.oldIndex,1),this.menuContent.splice(e.newIndex,0,t)}}]),e}()),oe={components:{draggable:ne.a},data:function(){return{user:new p,brick:new se,drag:new ie,menu:new ce,article:new q}},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},watch:{content:function(){var e=this;this.$nextTick((function(){var t=document.getElementsByClassName("contentRender")[0];ae.a.preview(t,e.article.articleData.content)}))}},methods:{init:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.user.getUserLocalData(),t.next=3,e.brick.getBrick(e.brickId);case 3:return t.next=5,e.article.getArticleData(e.brick.brickData.modules[0].id);case 5:e.menu.getMenu(e.brick.brickData.modules),e.menu.getTitle(e.brick.brickData.title),e.menu.initData(),e.goToModule(e.routerModuleId),e.$nextTick((function(){var t=document.getElementsByClassName("contentRender")[0];ae.a.preview(t,e.article.articleData.content,{anchor:1})}));case 10:case"end":return t.stop()}}),t)})))()},goToModule:function(e){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null!=e){n.next=2;break}return n.abrupt("return");case 2:return t.menu.changeNodeSelected(e),n.next=5,t.article.getArticleData(t.menu.menuContent[t.menu.NodeSort].id);case 5:case"end":return n.stop()}}),n)})))()},switchIndex:function(e){this.user.userData.loginState?this.brick.switchIndex(e):alert("请先登录！")},changeBrickTitle:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.userData.loginState){t.next=3;break}return alert("请先登录！"),t.abrupt("return");case 3:if(n=prompt("请输入砖石标题（恶意修改将导致封号）"),null!=n){t.next=6;break}return t.abrupt("return");case 6:e.menu.title=n,e.brick.changeBrickTitle(n);case 8:case"end":return t.stop()}}),t)})))()},changeModuleName:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.userData.loginState){t.next=3;break}return alert("请先登录！"),t.abrupt("return");case 3:if(n=prompt("请输入新的标题（恶意修改将导致封号）"),null!=n){t.next=6;break}return t.abrupt("return");case 6:return e.menu.renameName(n),t.next=9,e.brick.changeModuleName(e.menu.menuContent[e.menu.NodeSort].id,n);case 9:case"end":return t.stop()}}),t)})))()},changeModuleLevel:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.userData.loginState){t.next=3;break}return alert("请先登录！"),t.abrupt("return");case 3:if(n=prompt("请修改当前模块的层级",e.menu.menuContent[e.menu.NodeSort].level),n){t.next=6;break}return t.abrupt("return");case 6:if(!(n<6&&n>=0)){t.next=12;break}return e.menu.relevel(n),t.next=10,e.brick.changeModuleLevel(e.menu.menuContent[e.menu.NodeSort].id,n);case 10:t.next=13;break;case 12:alert("修改层数过大或过小");case 13:case"end":return t.stop()}}),t)})))()},createModule:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.userData.loginState){t.next=3;break}return alert("请先登录！"),t.abrupt("return");case 3:if(n=confirm("确定要创建吗？"),n){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.brick.createModule(0,e.menu.NodeSort+1,e.user.userData.email);case 8:return t.next=10,e.init();case 10:case"end":return t.stop()}}),t)})))()},deleteModule:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=confirm("确定要删除此模块吗？"),1==n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.brick.deleModule(e.menu.menuContent[e.menu.NodeSort].id);case 5:return t.next=7,e.init();case 7:case"end":return t.stop()}}),t)})))()},gotoEditor:function(){this.user.userData.loginState?this.brick.brickData.lock&&this.user.userData.level<5?alert("对不起，此砖石上锁"):this.$router.push({name:"markdownEditor",params:{_id:this.article.articleData._id}}):alert("请先登录！")},pushTo:function(e){this.$router.push({name:"brick",params:{_id:this.brickId,moduleId:e._id}}),this.goToModule(e._id)}},computed:{brickId:function(){return this.$route.params._id},routerModuleId:function(){return this.$route.params.moduleId},content:function(){return this.article.articleData.content}},created:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()}},ue=oe,le=(n("307a"),Object(v["a"])(ue,Y,ee,!1,null,"851cbb94",null)),de=le.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("div",{staticClass:"nav"},[n("ul",[n("li",[n("a",{staticClass:"button",on:{click:function(t){return e.urlpush("/")}}},[e._v("首页")])]),n("li",[n("a",{on:{click:function(t){return e.urlpush("/dataBase")}}},[e._v("数据库")])]),n("li",[n("a",{on:{click:function(t){return e.urlpush("/search")}}},[e._v("搜索")])]),n("li",[n("a",{on:{click:function(t){return e.urlpush("/article/5ea06dbc6fa9d76d3afd0bd9")}}},[e._v("提建议")])]),n("li",[n("a",{staticClass:"howToUse",on:{click:function(t){return e.urlpush("/article/5e9b55a828490c2f9ebf9066")}}},[e._v("如何使用？")])])]),n("div",{staticClass:"loginState"},[0==e.loginState&&null==this.userEmail?n("a",{on:{click:function(t){return e.urlpush("/login")}}},[e._v("未登录")]):n("a",{on:{click:function(t){return e.urlpush("/login")}}},[e._v("已登录")])])])])},pe=[],he={name:"Selfnavbar",created:function(){var e=localStorage.getItem("loseToken"),t=Math.abs(new Date-new Date(e));this.userEmail=t/1e3/60/60/24<=6?localStorage.getItem("userEmail"):null},data:function(){return{userEmail:""}},methods:{urlpush:function(e){this.$router.push(e)},getEmail:function(){return this.userEmail=localStorage.getItem("userEmail"),this.userEmail}},computed:{loginState:function(){return this.$store.state.loginState}}},me=he,ve=(n("0ea3"),Object(v["a"])(me,fe,pe,!1,null,"f0f85062",null)),be=ve.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginPanel"},[n("form",{staticClass:"form",attrs:{id:"form"}},[n("h2",[e._v("登录")]),n("h4",{staticStyle:{"text-align":"center"}},[e._v(" 若无账号则会自动创建账号 ")]),n("div",{staticClass:"form-control"},[n("label",{attrs:{for:"email"}},[e._v("邮箱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",id:"email",placeholder:"请输入邮箱"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("small",[e._v("错误提示")])]),n("div",{staticClass:"form-control"},[n("label",{attrs:{for:"password"}},[e._v("密码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("small",[e._v("错误提示")])]),n("button",{on:{click:e.login}},[e._v(" 登录/注册 ")])])])},ke=[],we=(n("498a"),n("99af"),n("fb6a"),n("159b"),n("6821")),_e=n.n(we),xe={data:function(){return{email:"",password:"",user:new p}},mounted:function(){var e=document.getElementById("email"),t=document.getElementById("password"),n=document.getElementById("form");function r(e,t){var n=e.parentElement;n.className="form-control error";var r=n.querySelector("small");r.innerText=t}function a(e){var t=e.parentElement;t.className="form-control success"}function i(e){var t=/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+.([A-Za-z]{2,4})$/;t.test(e.value.trim())?a(e):r(e,"邮箱格式错误")}function s(e,t,n){e.value.length<t?r(e,"".concat(c(e),"至少").concat(t,"个字符")):e.value.length>n?r(e,"".concat(c(e),"少于").concat(n,"个字符")):a(e)}function c(e){return e.placeholder.slice(3)}function o(e){e.forEach((function(e){""===e.value.trim()?r(e,"".concat(c(e),"为必填项")):a(e)}))}n.addEventListener("submit",function(){var n=Object(M["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.preventDefault(),o([e,t]),s(t,6,12),i(e);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},methods:{login:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,H.post("/user/login",{email:e.email,password:_e()(e.password)});case 2:n=t.sent.data,r=n.userData,a=n.token,i=n.message,a?(alert(i),e.user.userData.loginState=!0,e.user.userData.email=r.email,e.user.userData.token=a,e.user.userData.level=r.level,e.user.localizeData(),e.$router.push("/"),location.reload()):alert(i);case 7:case"end":return t.stop()}}),t)})))()}}},Ce=xe,ye=(n("806a"),Object(v["a"])(Ce,ge,ke,!1,null,"41484e51",null)),De=ye.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main "},[n("div",{staticClass:"search-bar"},[n("div",{staticClass:"searchTool bdrd5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"font16 bold",attrs:{type:"text",id:"search",placeholder:"搜索砖石"},domProps:{value:e.searchInput},on:{input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),n("div",{staticClass:"addTool"},[n("el-tooltip",{staticClass:"tips",attrs:{effect:"dark",content:"添加砖石",placement:"bottom"}},[n("div",{staticClass:"createBrick",on:{click:function(t){return e.createBrick()}}},[n("i",{staticClass:"el-icon-s-promotion"})])])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],staticClass:"searchPanel bdrd5 flexColumn "},[n("div",{directives:[{name:"show",rawName:"v-show",value:0==e.searchRes.length,expression:"searchRes.length==0"}],staticClass:"searchTips font16 bold"},[e._v(" 未搜索到结果... ")]),e._l(e.searchRes,(function(t){return n("div",{key:t._id,staticClass:"item font16 bdrd5 bold",on:{click:function(n){return e.goto(t._id)}}},[e._v(" "+e._s(t.title)+" ")])}))],2)]),n("div",{staticClass:"selectField flexRow flexCenter bgf9"},[n("el-radio-group",{model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-radio-button",{attrs:{label:"最热100"}}),n("el-radio-button",{attrs:{label:"最新100"}})],1)],1),n("div",{staticClass:"brick-list flexRow bgf9"},e._l(e.brickList,(function(t){return n("div",{key:t._id,staticClass:"brickItem bdrd5 ",on:{click:function(n){return e.goto(t._id)}}},[n("div",{staticClass:"title font16 bold"},[e._v(" "+e._s(t.title)+" "),n("i",{staticClass:"el-icon-d-arrow-right titlego"})]),n("div",{staticClass:"detile flexRow"},[n("div",{staticClass:"like"},[e._v(" 订阅 "),n("span",{staticClass:"num"},[e._v(e._s(t.watchingUser.length))])]),n("div",{staticClass:"comment"},[e._v(" 模块数 "),n("span",{staticClass:"num"},[e._v(e._s(void 0==t.modules?0:t.modules.length))])]),n("div",{staticClass:"share"},[e._v(" 浏览历史 "),n("span",{staticClass:"num"},[e._v(e._s(t.seeTimes))])])])])})),0)])},Oe=[],je=(n("4d63"),n("ac1f"),n("25f0"),n("466d"),{data:function(){return{user:new p,brickListHot:[{_id:1,title:"加载中",watchingUser:[],modules:[],seeTimes:10}],select:"最热100",brickListNew:[{_id:1,title:"加载中",watchingUser:[],modules:[],seeTimes:10}],searchInput:"",brickSearchBase:[]}},created:function(){this.initData()},methods:{initData:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOneHundredHot();case 2:return e.brickListHot=t.sent,t.next=5,e.getOneHundredNew();case 5:return e.brickListNew=t.sent,t.next=8,e.getBrickList();case 8:e.brickSearchBase=t.sent,e.user.getUserLocalData();case 10:case"end":return t.stop()}}),t)})))()},createBrick:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.user.userData.loginState){t.next=3;break}return alert("创建砖石需要登录"),t.abrupt("return");case 3:if(n=prompt("请输入砖石的名字"),n){t.next=7;break}return alert("请输入砖石的名称"),t.abrupt("return");case 7:return t.next=9,H.post("/searchpage/createBrick",{title:n,email:e.user.userData.email});case 9:r=t.sent,a=r.data,alert(a.message),e.$router.push({name:"brick",params:{_id:a._id}});case 13:case"end":return t.stop()}}),t)})))()},getOneHundredHot:function(){return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.get("/searchpage/oneHundredBrickHot");case 2:return t=e.sent,n=t.data,e.abrupt("return",n.res);case 5:case"end":return e.stop()}}),e)})))()},getOneHundredNew:function(){return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.get("/searchpage/oneHundredBrickNew");case 2:return t=e.sent,n=t.data,e.abrupt("return",n.res);case 5:case"end":return e.stop()}}),e)})))()},getBrickList:function(){return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.get("/searchpage/searchList");case 2:return t=e.sent,n=t.data,e.abrupt("return",n.res);case 5:case"end":return e.stop()}}),e)})))()},goto:function(e){this.$router.push({name:"brick",params:{_id:e}})}},computed:{brickList:function(){return"最热100"==this.select?this.brickListHot:this.brickListNew},searchShow:function(){return""!=this.searchInput},searchRes:function(){var e=this;if(""==this.searchInput||this.brickSearchBase==[])return[];var t=this.brickSearchBase.filter((function(t){var n=new RegExp(e.searchInput,"i");return t.title.match(n)}));return t},loginState:function(){return this.$store.state.loginState}}}),Se=je,Ne=(n("380d"),Object(v["a"])(Se,Re,Oe,!1,null,"e0b3912a",null)),Ie=Ne.exports,Te=[{path:"*",component:Q},{path:"/",component:Q},{path:"/brick/:_id/:moduleId",component:de,name:"brick",props:!0},{path:"/markdownEditor/:_id",component:W,name:"markdownEditor",props:!0},{path:"/navbar",component:be},{path:"/login",component:De},{path:"/square",component:Ie}],Ee=Te,Be=n("8c4f"),Me=n("2f62"),$e=n("1f94"),Le=n.n($e),Ae=n("7761"),Ue={state:{dragOpen:!1,selectNodeId:"",homeCard:!0,managerCard:!1,userCard:!0,addCard:!0,editCard:!1,editContent:"",loginState:!1,email:"",editId:"",editVersion:""},mutations:{openDrag:function(e){e.dragOpen=!0},closeDrag:function(e){e.dragOpen=!1},selectNode:function(e,t){e.selectNodeId=t},syncContext:function(){console.log("sync")},openEditCard:function(e){e.editCard=!0},closeEditCard:function(e){e.editCard=!1},Login:function(e){e.loginState=!0},noLogin:function(e){e.loginState=!1},syncArticle:function(e,t){e.editContent=t.md,e.editId=t.articleId,t.version?e.editVersion=t.version:e.editVersion=""}},plugins:[Object(Ae["a"])()]},Pe=Ue,He=n("e5d9");r["default"].use(N.a);var qe=n("0937"),ze=n.n(qe);r["default"].config.productionTip=!1,r["default"].use(He["a"]),r["default"].use(Le.a),r["default"].use(N.a),r["default"].use(Be["a"]),r["default"].use(Me["a"]),r["default"].use(ze.a);var Je=new Be["a"]({routes:Ee,mode:"hash"}),Ve=new Me["a"].Store(Pe);r["default"].prototype.$axios=T.a,new r["default"]({router:Je,store:Ve,render:function(e){return e(j)}}).$mount("#app")},"670e":function(e,t,n){},"6aae":function(e,t,n){"use strict";n("fb35")},"7b7c":function(e,t,n){"use strict";n("db8e")},"7c55":function(e,t,n){"use strict";n("2395")},"806a":function(e,t,n){"use strict";n("1cdd")},a1aa:function(e,t,n){},a1bc:function(e,t){e.exports={developmentMode:!1,productionURL:"https://47.100.193.107:7865",developmentURL:"http://127.0.0.1:7865"}},db8e:function(e,t,n){},fb35:function(e,t,n){}});
//# sourceMappingURL=app.18967a76.js.map